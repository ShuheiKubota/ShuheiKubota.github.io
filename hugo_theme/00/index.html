<!doctype html><html lang><head><meta charset=utf-8><title>Hugo テーマ 0. 作成について - 作ったものとか</title><meta name=generator content="Hugo 0.96.0"><meta name=copyright content="(C) 2017 Shuhei Kubota"><meta name=description content="software application article hugo"><meta property="og:title" content="Hugo テーマ 0. 作成について"><meta property="og:description" content="Hugoのサイトにあるテーマ作成についての文書(Create a Theme &#9744;&#8599;, Templates &#9744;&#8599;の中)から、ポイントとなるであろう箇所を拾い出していきます。"><meta property="og:type" content="article"><meta property="og:url" content="/hugo_theme/00/"><meta property="article:section" content="hugo_theme"><meta property="article:published_time" content="2017-09-04T11:34:32+09:00"><meta property="article:modified_time" content="2021-10-24T15:59:05+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo テーマ 0. 作成について"><meta name=twitter:description content="Hugoのサイトにあるテーマ作成についての文書(Create a Theme &#9744;&#8599;, Templates &#9744;&#8599;の中)から、ポイントとなるであろう箇所を拾い出していきます。"><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><link href=/sass/cheep.min.fa3e5c9efd4a7e089a92f33aa676b09ee00a4d2217ec3f441e738e9f49b1404b.css rel=stylesheet><link href=/css/style.css rel=stylesheet></head><body><script async src="https://www.googletagmanager.com/gtag/js?id=G-TK21YTEJFM"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TK21YTEJFM",{anonymize_ip:!1})}</script><div class=header><a href=/>作ったものとか</a>&nbsp;&#187; <a href=/hugo_theme/>Hugo テーマ</a></div><div class=main><div class=toc-area><nav id=TableOfContents><ul><li><a href=#create-a-theme>Create a Theme</a><ul><li><a href=#hugo-new-theme>hugo new theme</a></li><li><a href=#theme-components>Theme Components</a><ul><li><a href=#hugo-チームからのお願い>Hugo チームからのお願い</a></li></ul></li><li><a href=#layouts>Layouts</a></li><li><a href=#partial-templates>Partial Templates</a></li><li><a href=#static>Static</a></li><li><a href=#archetypes>Archetypes</a></li></ul></li><li><a href=#templates>Templates</a><ul><li><a href=#introduction-to-hugo-templating>Introduction to Hugo Templating</a></li><li><a href=#hugos-lookup-order>Hugo&rsquo;s Lookup Order</a></li><li><a href=#custom-output-formats>Custom Output Formats</a></li><li><a href=#base-templates-and-blocks>Base Templates and Blocks</a></li><li><a href=#lists-of-content-in-hugo>Lists of Content in Hugo</a><ul><li><a href=#_indexmd>_index.md</a></li><li><a href=#datapages-でリストの内容を取得>.Data.Pages でリストの内容を取得</a></li></ul></li><li><a href=#homepage-template>Homepage Template</a><ul><li><a href=#テンプレートとしては不要なのでは>テンプレートとしては不要なのでは</a></li><li><a href=#ルックアップ順序>ルックアップ順序</a></li><li><a href=#homepage-の内容について>Homepage の内容について</a></li><li><a href=#datapages-はサイト内の全てのページ>.Data.Pages は、サイト内の全てのページ</a></li></ul></li><li><a href=#section-page-templates>Section Page Templates</a><ul><li><a href=#ルックアップ順序-1>ルックアップ順序</a></li></ul></li><li><a href=#taxonomy-list-templates>Taxonomy List Templates</a><ul><li><a href=#taxonomy-について>Taxonomy について</a></li><li><a href=#ルックアップ順序-2>ルックアップ順序</a></li></ul></li><li><a href=#taxonomy-terms-templates>Taxonomy Terms Templates</a><ul><li><a href=#ルックアップ順序-3>ルックアップ順序</a></li></ul></li><li><a href=#single-page-templates>Single Page Templates</a><ul><li><a href=#ルックアップ順序-4>ルックアップ順序</a></li></ul></li></ul></li></ul></nav></div><div class=main-area><h1>Hugo テーマ 0. 作成について</h1><span class=lastmod>2021-10-24 15:59:05</span>
<span class=tag><a href=/tags/hugo>hugo</a></span><p>Hugoのサイトにあるテーマ作成についての文書(<a href=https://gohugo.io/themes/creating/ target=_blank rel="external noopener noreferer">Create a Theme <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a>, <a href=https://gohugo.io/templates/ target=_blank rel="external noopener noreferer">Templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a>の中)から、ポイントとなるであろう箇所を拾い出していきます。</p><h1 id=create-a-theme>Create a Theme</h1><h2 id=hugo-new-theme>hugo new theme</h2><p>すでにサイトが作ってある状態で次のコマンドを実行すると、themes ディレクトリ内に、空のテーマディレクトリが作成されます。
(サブディレクトリもファイルも作られてはいるが、中身は 0bytes)</p><pre tabindex=0><code>hugo new theme [name]
</code></pre><h2 id=theme-components>Theme Components</h2><ul><li>テンプレート</li><li>アセット (.js, .css　とか)</li><li>archetypes (hugo new する際のファイルの原型で、front matter を含んだもの)</li></ul><h3 id=hugo-チームからのお願い>Hugo チームからのお願い</h3><p>hugo.Generator を作成したサイトやテーマの中に記述してくださいね、と言っています。
これは、Hugo のコアチームが Hugo がどのくらい使われているかといったことを知る手がかりになるようです。</p><h2 id=layouts>Layouts</h2><p>Hugo では、Web サイトの表示のされ方を次の2種類としています。</p><ul><li><p>single</p><p>layouts/_default/single.html</p></li><li><p>list</p><p>layouts/_default/list.html</p></li></ul><p>「通常のレイアウト」の範疇として収まる記述であれば上記の _default に記載し、中身の種類等で特別扱いをしたいものが増えた場合に、種類ごとのレイアウトファイルを足して行くというのが良いようです。</p><h2 id=partial-templates>Partial Templates</h2><p><a href=https://gohugo.io/templates/partials/ target=_blank rel="external noopener noreferer">partial templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a> にある機能を使うことが推奨されているようです。</p><ul><li>テーマ内で使い回しをするため</li><li>テーマの利用者が上書きできるものの単位として、個別のサイトの情報をテーマの中に差し込むため</li></ul><h2 id=static>Static</h2><p>static ディレクトリにあるものは、成果物となるサイトの中にコピーされます。
このディレクトリ内の構造は規定されていないので、好きなようにディレクトリ構造を考えてね、とのこと。</p><h2 id=archetypes>Archetypes</h2><p>テーマに必要なキーを front matter に追加したい場合は、テーマごとに archetype を定義することもできるようです。</p><h1 id=templates>Templates</h1><p>特に list レイアウトが採用される基準が分かりづらかったこともあり、どのようなテンプレートがあるのか整理しました。</p><p>もととしたのは、<a href=https://gohugo.io/templates/ target=_blank rel="external noopener noreferer">Templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a>です。</p><h2 id=introduction-to-hugo-templating>Introduction to Hugo Templating</h2><p><a href=https://gohugo.io/templates/introduction/ target=_blank rel="external noopener noreferer">Introduction to Hugo Templating <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>Goのテンプレートの仕組みに従うよ、ということのようですね。</p><p>よく使うであろう構文が Hugo での変数を使った例とともに説明されていますので、一読しておいて損はないかと思います。</p><h2 id=hugos-lookup-order>Hugo&rsquo;s Lookup Order</h2><p><a href=https://gohugo.io/templates/lookup-order/ target=_blank rel="external noopener noreferer">Hugo&rsquo;s Lookup Order <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>single レイアウトのテンプレートを決定するルールが、実例とともに説明されています。</p><h2 id=custom-output-formats>Custom Output Formats</h2><p><a href=https://gohugo.io/templates/output-formats/ target=_blank rel="external noopener noreferer">Custom Output Formats <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>HTML とは異なる種類の出力をする場合の設定方法とか、かな？ とりあえず現時点では不要な情報なので、無視。</p><h2 id=base-templates-and-blocks>Base Templates and Blocks</h2><p><a href=https://gohugo.io/templates/base/ target=_blank rel="external noopener noreferer">Base Templates and Blocks <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>Base テンプレートとして、ページの大枠の構造を定義しておき、その中で各部を block として定義しておく。
すると、Base テンプレートを使う他のテンプレートからは、Base テンプレートの大枠を使いつつも、block の中身を差し替える事ができます。</p><p>Base テンプレートは、baseof.html という名前。</p><p>Base テンプレートでは、共通で使う CSS, JavaScript の参照やら共通のタグの埋め込みをしつつ、single や list といったレイアウトごとに変えられる部分を定義していくことになるのでしょうね。</p><h2 id=lists-of-content-in-hugo>Lists of Content in Hugo</h2><p><a href=https://gohugo.io/templates/lists/ target=_blank rel="external noopener noreferer">Lists of Content in Hugo <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>ページの集合を扱う場合のレイアウトについて記載してあります。</p><p>個別にどういった集合があるかは、次のページに記載されています。</p><ul><li><a href=#homepage-template>Homepage Template</a></li><li><a href=#section-page-templates>Section Page Templates</a></li><li><a href=#taxonomy-list-templates>Taxonomy List Templates</a></li></ul><h3 id=_indexmd>_index.md</h3><p><code>_index.md</code> は list タイプのテンプレートが適用されます。
<code>_index.md</code> は必須ではありません。</p><p><code>_index.md</code> は single タイプのページ生成の対象外です。</p><h3 id=datapages-でリストの内容を取得>.Data.Pages でリストの内容を取得</h3><p>その list タイプのテンプレートが対象としている個々のページの情報は、テンプレートでは .Data.Pages で参照します。</p><h2 id=homepage-template>Homepage Template</h2><p><a href=https://gohugo.io/templates/homepage/ target=_blank rel="external noopener noreferer">Homepage Template <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>Web サイトのホームページは他のページとは異なる作りになることが多いため、Homepage Template として独立させたようです。</p><h3 id=テンプレートとしては不要なのでは>テンプレートとしては不要なのでは</h3><p>個人的には、テンプレートとして個別のサイトの事情があるホームページについてのテンプレートを作る必要があるのかについては懐疑的です。</p><p>サイト個別にホームページのレイアウトを変えたい場合は list.html をコピーして改変してもらった方が良いように思います。</p><p>その方が、テンプレートを作る側としては、個別の事情を慮ってレイアウトを考えなくても良いので、作るのを躊躇することも減るでしょう。
利用する側としても、テンプレートが必要最低限の機能（テンプレート）を提供していれば、それを流用することが楽になります。</p><h3 id=ルックアップ順序>ルックアップ順序</h3><p>テンプレートを作る上では、次の順序です。</p><ol><li>/themes/&lt;THEME>/layouts/index.html</li><li>/themes/&lt;THEME>/layouts/_default/list.html</li></ol><h3 id=homepage-の内容について>Homepage の内容について</h3><p>list タイプのテンプレートのため、利用側のサイトの方で content/<code>_index.md</code> が作ってあれば、テンプレート中で .Page として参照することができます。</p><h3 id=datapages-はサイト内の全てのページ>.Data.Pages は、サイト内の全てのページ</h3><h2 id=section-page-templates>Section Page Templates</h2><p><a href=https://gohugo.io/templates/section-templates/ target=_blank rel="external noopener noreferer">Section Page Templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>要は、content ディレクトリ直下のディレクトリのこと。</p><h3 id=ルックアップ順序-1>ルックアップ順序</h3><p>テンプレートを作る上では、次の順序です。</p><ol><li>/themes/&lt;THEME>/layouts/section/&lt;SECTION>.html</li><li>/themes/&lt;THEME>/layouts/&lt;SECTION>/list.html</li><li>/themes/&lt;THEME>/layouts/_default/section.html</li><li>/themes/&lt;THEME>/layouts/_default/list.html</li></ol><h2 id=taxonomy-list-templates>Taxonomy List Templates</h2><p><a href=https://gohugo.io/templates/taxonomy-templates/ target=_blank rel="external noopener noreferer">Taxonomy Templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><h3 id=taxonomy-について>Taxonomy について</h3><p>Taxonomy については、<a href=https://gohugo.io/content-management/taxonomies/ target=_blank rel="external noopener noreferer">Taxonomies <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a> を見るのが良いです。</p><p>その中の Movie Taxonomy Organization の例を転記します。</p><pre><code>Actor                    &lt;- Taxonomy
Bruce Willis         &lt;- Term
    The Sixth Sense    &lt;- Content
    Unbreakable      &lt;- Content
    Moonrise Kingdom &lt;- Content
Samuel L. Jackson    &lt;- Term
    Unbreakable      &lt;- Content
    The Avengers     &lt;- Content
    xXx              &lt;- Content
</code></pre><p>Taxonomy List Templates は、taxonomy term に紐付いたページのリストを対象としています。</p><p>ですので、上例の Bruece Willis について、 The Sixth Sense や Unbreakable をリスト表示するものです。</p><h3 id=ルックアップ順序-2>ルックアップ順序</h3><p>テンプレートを作る上では、次の順序です。</p><ol><li>/themes/&lt;THEME>/layouts/taxonomy/&lt;SINGULAR>.html</li><li>/themes/&lt;THEME>/layouts/_default/taxonomy.html</li><li>/themes/&lt;THEME>/layouts/_default/list.html</li></ol><h2 id=taxonomy-terms-templates>Taxonomy Terms Templates</h2><p><a href=https://gohugo.io/templates/taxonomy-templates/#taxonomy-terms-template target=_blank rel="external noopener noreferer">Taxonomy Terms Template <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>上例の Actor について、 Bruce Willis や Samuel L. Jackson をリスト表示するものです。</p><h3 id=ルックアップ順序-3>ルックアップ順序</h3><p>テンプレートを作る上では、次の順序です。</p><ol><li>/themes/&lt;THEME>/layouts/taxonomy/&lt;SINGULAR>.terms.html</li><li>/themes/&lt;THEME>/layouts/_default/terms.html</li></ol><p>Note: 最終的にサイトの layouts ディレクトリを含めて、上記のテンプレートが見つからない場合、taxonomy terms ページは生成されません。</p><h2 id=single-page-templates>Single Page Templates</h2><p><a href=https://gohugo.io/templates/single-page-templates/ target=_blank rel="external noopener noreferer">Single Page Templates <span style=position:relative><span>&#9744;</span><span style=position:absolute;top:-.3em;left:.2em>&#8599;</span></span></a></p><p>個別の md の内容を表示するためのテンプレートです。</p><h3 id=ルックアップ順序-4>ルックアップ順序</h3><p>テンプレートを作る上では、次の順序です。</p><ol><li>/themes/&lt;THEME>/layouts/&lt;TYPE>/&lt;LAYOUT>.html</li><li>/themes/&lt;THEME>/layouts/&lt;SECTION>/&lt;LAYOUT>.html</li><li>/themes/&lt;THEME>/layouts/&lt;TYPE>/single.html</li><li>/themes/&lt;THEME>/layouts/&lt;SECTION>/single.html</li><li>/themes/&lt;THEME>/layouts/_default/single.html</li></ol><div class=single_pagenav><div class=single_pagenav_prev></div><div class=single_pagenav_next><a href=/hugo_theme/01/>&#187; Hugo テーマ 1. single テンプレート &#187;</a></div></div></div><div class=side-area><div class=profile><object type=image/svg+xml alt="follow chimatter at twitter" data="https://img.shields.io/badge/@chimatter-Follow-blue?style=for-the-badge&logo=twitter&logoColor=white&link=https://twitter.com/intent/user?screen_name=chimatter&link=https://twitter.com/intent/follow?screen_name=chimatter" style=margin-top:2em;margin-left:1em></object><p class=description></p></div><div class=latest_list_container><ul><li><a href=/soft/git-cx/ title=gitのコミットメッセージを、コマンドラインで選択しながら構築していくツール><span style=display:inline-block;text-decoration:none>📄 </span>git-cx<span class=lastmod>2025-01-03 09:41:38</span><div class=latest_summary>gitのコミットメッセージを、コマンドラインで選択しながら構築していくツール</div></a></li><li><a href=/hugo_theme/06/ title="#5 の題材を、今度は Render Hook という機能を使って実装します。"><span style=display:inline-block;text-decoration:none>📄 </span>Hugo テーマ 6. Render Hook<span class=lastmod>2024-08-16 12:36:24</span><div class=latest_summary>#5 の題材を、今度は Render Hook という機能を使って実装します。</div></a></li><li><a href=/note/20220505-stacktrace/ title="Go言語のパッケージ: 冗長なスタックトレースを簡素化して出力します。"><span style=display:inline-block;text-decoration:none>📄 </span>Go言語でのスタックトレースを簡素化する<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>Go言語のパッケージ: 冗長なスタックトレースを簡素化して出力します。</div></a></li><li><a href=/note/20240815-go-table-driven-benchmark/ title=公式に記載ありますが、まとめてみます。><span style=display:inline-block;text-decoration:none>📄 </span>Goでテーブル駆動のベンチマークをとる方法<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>公式に記載ありますが、まとめてみます。</div></a></li><li><a href=/note/20240504-go-slog/ title="slog-handler-guide の解説"><span style=display:inline-block;text-decoration:none>📄 </span>slog-handler-guide<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>slog-handler-guide の解説</div></a></li><li><a href=/vim/popcorn/ title="自分がよく使うコマンドを登録して呼び出すための Vim script"><span style=display:inline-block;text-decoration:none>📄 </span>Popcorn<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>自分がよく使うコマンドを登録して呼び出すための Vim script</div></a></li><li><a href=/note/20211121-ergodoxez/ title="JISレイアウトを参考にした、Ergodox EZ のキーボードレイアウト"><span style=display:inline-block;text-decoration:none>📄 </span>Ergodox EZ キーボードレイアウト<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>JISレイアウトを参考にした、Ergodox EZ のキーボードレイアウト</div></a></li><li><a href=/soft/pomi/ title="ポメラSyncされたメモを操作するツール
→後継のソフトウェアpmsyncを使ってください。"><span style=display:inline-block;text-decoration:none>📄 </span>pomi<span class=lastmod>2024-08-16 10:26:05</span><div class=latest_summary>ポメラSyncされたメモを操作するツール
→後継のソフトウェアpmsyncを使ってください。</div></a></li><li><a href=/note/20240807-keychron-k15-pro/ title=買ったので雑に感想でも書いてみます。><span style=display:inline-block;text-decoration:none>📄 </span>Keychron K15 Pro<span class=lastmod>2024-08-15 21:30:59</span><div class=latest_summary>買ったので雑に感想でも書いてみます。</div></a></li><li><a href=/note/20240420-vim-lsp/ title=忘れそうな内容をメモ><span style=display:inline-block;text-decoration:none>📄 </span>Vim LSP メモ<span class=lastmod>2024-08-15 21:30:59</span><div class=latest_summary>忘れそうな内容をメモ</div></a></li></ul></div><div class=tags_container><ul><li class=tag><a href=/tags/hugo>hugo<span class=tag_count>8</span></a></li><li class=tag><a href=/tags/go>go<span class=tag_count>7</span></a></li><li class=tag><a href=/tags/vim>vim<span class=tag_count>4</span></a></li><li class=tag><a href=/tags/git>git<span class=tag_count>2</span></a></li><li class=tag><a href=/tags/pomera>pomera<span class=tag_count>2</span></a></li><li class=tag><a href=/tags/system>system<span class=tag_count>2</span></a></li><li class=tag><a href=/tags/ergodox>ergodox<span class=tag_count>1</span></a></li><li class=tag><a href=/tags/lsp>lsp<span class=tag_count>1</span></a></li><li class=tag><a href=/tags/raspberrypi>raspberrypi<span class=tag_count>1</span></a></li><li class=tag><a href=/tags/sesame>sesame<span class=tag_count>1</span></a></li></ul></div></div></div><div class=footer>Top: <a href=/>作ったものとか</a><br>(C) 2017 Shuhei Kubota<br>Powered by <a href=https://gohugo.io/>Hugo</a><br></div><script src=/js/cheep.min.50bf33f389ee59550d8736b6bea841f7ff5df4003a9266b1d0a0c3df5d19eea7.js></script>
<script>document.addEventListener("DOMContentLoaded",function(){for(var n=document.querySelectorAll(".lastmod"),s,e,t=0;t<n.length;t++)s=n[t],replaceSince(s);e=document.createElement("link"),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),window.matchMedia("(prefers-color-scheme: dark)").matches?e.setAttribute("href","/css/syntax_dark.min.d789390f5a3be5bbfbc6644f3e2032dd70e92f98fd731ee24ddb28a585754a56.css"):e.setAttribute("href","/css/syntax.min.312e73862fbcdff2de47e47a87e03065060a993ebd316d20e86016fb17f1bbe6.css"),document.getElementsByTagName("head")[0].appendChild(e)})</script></body></html>